<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <title>图片编辑 MVP</title>
</head>
<body>
  <h1>图片编辑 MVP</h1>

  <input type="file" id="image" accept="image/*" />
  <br /><br />
  <textarea id="prompt" placeholder="例如：把蓝天换成白云"></textarea>
  <br /><br />
  <button id="run">生成图片</button>

  <h2>结果：</h2>
  <img id="result" style="max-width:100%;" />

  <script>
    const run = document.getElementById("run");
    const result = document.getElementById("result");

    run.onclick = async () => {
      const fd = new FormData();
      fd.append("image", image.files[0]);
      fd.append("prompt", prompt.value);

      const res = await fetch("/api/image-edit", {
        method: "POST",
        body: fd
      });

      const data = await res.json();
      result.src = data.image;
    };
  </script>
</body>
</html>
